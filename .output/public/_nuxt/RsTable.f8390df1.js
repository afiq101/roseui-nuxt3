import{K as be,L as fe,p as m,s as V,B as G,i as me,o as l,b as u,y as S,u as r,e as s,j as v,M as Q,w as y,F as k,r as C,c as B,k as U,t as g,f as T,x as ge,U as he}from"./entry.5f4d3365.js";import{_ as ye}from"./RsButton.8c0cab6e.js";import{_ as pe,a as xe}from"./RsDropdown.85c8f69a.js";import{_ as we,a as ke}from"./RsCollapse.27e7666d.js";const Ce={class:"table-header-filter"},je={class:"flex gap-x-2"},Oe=s("span",{class:"hidden sm:block"},"Filter",-1),ze={class:"flex justify-center items-center gap-x-2"},Se=s("span",{class:"text-secondary"},"Result per page:",-1),Ae={class:"flex flex-wrap items-center justify-start gap-x-3"},$e={key:1,class:"table-header-filter-list w-full m-4"},Ve={class:"flex flex-wrap items-center justify-start gap-x-2"},Be={class:"w-full overflow-x-auto"},Te=["onClick"],Fe={key:0,class:"sortable"},Pe={key:1},De={class:"grid grid-cols-2"},Ee={class:"flex flex-col col-span-1"},Me={class:"font-semibold leading-tight"},Le={class:"text-sm"},Ne={class:"flex justify-end items-center col-span-1"},Ue={class:"mr-4"},We={key:2,class:"table-footer"},Ke={class:"flex justify-center items-center gap-x-2"},Re={class:"text-sm text-secondary hidden md:block"},Ie={class:"table-footer-page"},Qe={__name:"RsTable",props:{field:{type:Array,default:()=>[]},data:{type:Array,default:()=>[]},basic:{type:Boolean,default:!0},advanced:{type:Boolean,default:!1},options:{type:Object,default:()=>({variant:"default",striped:!1,bordered:!1,borderless:!1,hover:!1})},optionsAdvanced:{type:Object,default:()=>({sortable:!0,filterable:!0,responsive:!1})},grid:{type:Boolean,default:!1}},setup(e){const h=e,H=be().mobileWidth,{width:X}=fe(),W=m(X),b=m([]),D=m(h.data),A=m([]),F=m(h.data.length),j=m(0),O=m("asc"),c=m(1),p=m(5),Y=m(3),P=m(""),z=m([]),E=m(!1),$=m(!1),_=V(()=>W.value>=H);h.optionsAdvanced.responsive&&(_.value?$.value=!1:$.value=!0),G(()=>[h.data,h.field],()=>{h.field.length>0?(b.value=h.field,A.value=h.field):(b.value=Object.keys(D.value[0]),A.value=Object.keys(D.value[0]))},{immediate:!0});const M=t=>t.replace(/([A-Z])/g," $1").replace(/^./,a=>a.toUpperCase()),ee=t=>{try{h.field.length==0?b.value=Object.keys(t):b.value=h.field}catch(a){console.log(a)}},te=(t,a)=>{let i="";try{if(h.field.length==0)Object.entries(t).forEach(([o,d])=>{if(o===a){i=d;return}});else{let o=b.value.indexOf(a);i=Object.values(t)[o]}return i===""&&(i="-"),i}catch(o){return console.log(o),"-"}};ee(D.value[0]);const L=V(()=>{let t=[],a=0;return t=D.value.slice().sort((i,o)=>{let d=1,x=i[b.value[j.value]],N=o[b.value[j.value]];return O.value==="desc"&&(d=-1),x<N?-1*d:x>N?1*d:0}).filter(i=>{if(P.value==="")return!0;let o=!1;return Object.entries(i).forEach(([d,x])=>{x.toString().toLowerCase().includes(P.value.toLowerCase())&&(o=!0)}),o}).filter((i,o)=>{let d=(c.value-1)*p.value,x=c.value*p.value;if(a++,o>=d&&o<x)return!0}),F.value=a,t}),ae=V(()=>F.value),re=t=>{t===j.value?O.value=O.value==="asc"?"desc":"asc":t!==j.value&&O.value=="desc"&&(O.value="asc"),j.value=t},oe=V(()=>{let t=Math.ceil(F.value/p.value);const a=Math.min(Y.value,t);let i=c.value-Math.floor(a/2);return i=Math.max(i,1),i=Math.min(i,t-a+1),[...Array(a)].map((o,d)=>d+i)}),K=V(()=>Math.ceil(F.value/p.value)),ne=t=>{c.value=t},ie=()=>{c.value*p.value<F.value&&c.value++},le=()=>{c.value>1&&c.value--},se=()=>{c.value=1},de=()=>{c.value=K.value},Z=t=>{R(t)?q(t,"hide",!1):q(t,"hide",!0)},q=(t,a,i)=>{let o=z.value.findIndex(d=>d.key===t);o==-1?z.value.push({key:t,action:{[a]:i}}):z.value[o].action[a]=i},R=t=>{let a=!1;return z.value.forEach(i=>{i.key===t&&(a=i.action.hide)}),a};G(()=>z.value,()=>{z.value.forEach(t=>{if(t.action.hide){let a=b.value.indexOf(t.key);a!==-1&&b.value.splice(a,1)}else if(!t.action.hide){let a=A.value.indexOf(t.key);b.value.includes(t.key)||(b.value.splice(a,0,t.key),b.value.sort((i,o)=>{let d=A.value.indexOf(i),x=A.value.indexOf(o);return d-x}))}})},{deep:!0});const J=V(()=>{let t=[];return z.value.forEach(a=>{a.action.hide&&t.push({title:a.key,hide:a.action.hide})}),t});return G(()=>W.value,()=>{h.optionsAdvanced.responsive&&(W.value<=H?$.value=!0:$.value=!1)},{deep:!0}),(t,a)=>{const i=me("FormKit"),o=ge,d=ye,x=pe,N=xe,ue=we,ce=ke,ve=he;return l(),u("div",{class:S(["table-wrapper",{"!border":e.advanced&&!r($)}])},[e.advanced?(l(),u("div",{key:0,class:S(["table-header",{open:r(E)}])},[s("div",Ce,[s("div",null,[s("div",je,[v(i,{modelValue:r(P),"onUpdate:modelValue":a[0]||(a[0]=n=>Q(P)?P.value=n:null),type:"search",placeholder:"Search...","outer-class":"mb-0"},null,8,["modelValue"]),v(d,{class:"!px-3 sm:!px-6 bg-primary-800",onClick:a[1]||(a[1]=n=>r(E)?E.value=!1:E.value=!0)},{default:y(()=>[v(o,{name:"ic:outline-filter-alt",class:"mr-0 md:mr-1",size:"1rem"}),Oe]),_:1})])]),s("div",ze,[Se,v(i,{type:"select",modelValue:r(p),"onUpdate:modelValue":a[2]||(a[2]=n=>Q(p)?p.value=n:null),options:[5,10,25,100],"outer-class":"mb-0"},null,8,["modelValue"])])]),s("div",Ae,[(l(!0),u(k,null,C(r(A),(n,f)=>(l(),B(N,{title:M(n),size:"sm",class:"mt-3",key:f},{default:y(()=>[v(x,{onClick:w=>Z(n)},{default:y(()=>[U(g(R(n)?"Show Column":"Hide Column")+" ",1),v(o,{name:R(n)?"mdi:eye-outline":"mdi:eye-off-outline",size:"1rem",class:"ml-auto"},null,8,["name"])]),_:2},1032,["onClick"])]),_:2},1032,["title"]))),128))])],2)):T("",!0),r(J).length>0?(l(),u("div",$e,[s("div",Ve,[(l(!0),u(k,null,C(r(J),(n,f)=>(l(),u("div",{class:"flex items-center justify-center gap-x-2 border border-primary-800 text-primary-800 rounded-lg py-1 px-2",key:f},[U(g(n?M(n.title):"")+" ",1),v(o,{name:"ic:round-close",class:"mr-0 md:mr-1 hover:text-red-800 cursor-pointer",size:"1rem",onClick:w=>Z(n.title)},null,8,["onClick"])]))),128))])])):T("",!0),s("div",Be,[v(ve,null,{default:y(()=>[r($)?(l(),u("div",Pe,[r(L).length>0?(l(),B(ce,{key:0,accordion:""},{default:y(()=>[(l(!0),u(k,null,C(r(L),(n,f)=>(l(),B(ue,{key:f},{title:y(()=>[s("div",De,[s("div",Ee,[s("span",Me,g(Object.values(n)[0]),1),s("span",Le,g(Object.values(n)[1]),1)]),s("div",Ne,[s("div",Ue,g(Object.values(n)[r(L).length]),1)])])]),default:y(()=>[(l(!0),u(k,null,C(Object.entries(n).slice(2,Object.entries(n).length),(w,I)=>(l(),u("div",{class:"flex justify-between items-center even:bg-inherit odd:bg-gray-200 rounded-lg p-3",key:I},[s("span",null,g(M(w[0])),1),s("span",null,g(w[1]),1)]))),128))]),_:2},1024))),128))]),_:1})):T("",!0)])):(l(),u("table",{key:0,class:S(["table-content",{"!border-y !border-0":e.advanced,"table-fixed":e.options.fixed,"table-auto":!e.options.fixed}])},[s("thead",{class:S(["text-left border-gray-200 dark:border-slate-700",{"border-y":!e.options.borderless,"border-gray-200 bg-gray-100 dark:bg-gray-800":e.options.variant==="default","border-primary-200 bg-primary-800 text-white ":e.options.variant==="primary","border-gray-200 bg-secondary text-white":e.options.variant==="secondary","border-blue-200 bg-blue-500 text-white ":e.options.variant==="info","border-green-200 bg-green-500 text-white":e.options.variant==="success","border-orange-200 bg-warning text-white":e.options.variant==="warning","border-red-200 bg-red-500 text-white":e.options.variant==="danger"}])},[s("tr",null,[(l(!0),u(k,null,C(r(b),(n,f)=>(l(),u("th",{class:S(["relative py-3 pl-5 pr-8 whitespace-nowrap",{"border-r last:border-l last:border-r-0":e.options.bordered&&!e.options.borderless,"border-gray-300":e.options.variant==="default","border-primary-800":e.options.variant==="primary","border-gray-300":e.options.variant==="secondary","border-blue-300":e.options.variant==="info","border-green-300":e.options.variant==="success","border-orange-300":e.options.variant==="warning","border-red-800":e.options.variant==="danger","w-36":e.options.fixed,"cursor-pointer":e.optionsAdvanced.sortable&&e.advanced}]),style:{"min-width":"100px"},onClick:w=>e.optionsAdvanced.sortable&&e.advanced?re(f):null,key:f},[U(g(e.field.length>0?n:M(n))+" ",1),e.optionsAdvanced.sortable&&e.advanced?(l(),u("div",Fe,[v(o,{class:"absolute top-3 right-2 opacity-20",size:"1.25rem",name:"mdi:sort-alphabetical-variant"}),r(j)==f&&r(O)=="asc"?(l(),B(o,{key:0,class:"absolute top-3 right-2 opacity-50",size:"1.25rem",name:"mdi:sort-alphabetical-ascending-variant"})):r(j)==f&&r(O)=="desc"?(l(),B(o,{key:1,class:"absolute top-3 right-2 opacity-50",size:"1.25rem",name:"mdi:sort-alphabetical-descending-variant"})):T("",!0)])):T("",!0)],10,Te))),128))])],2),s("tbody",null,[(l(!0),u(k,null,C(r(L),(n,f)=>(l(),u("tr",{class:S({"border-y border-gray-200 dark:border-slate-700":!e.options.bordered&&!e.options.borderless,"border-b":e.options.bordered&&!e.options.borderless,"border-b-0":e.options.borderless,"border-gray-200 odd:bg-white even:bg-slate-50 dark:even:bg-slate-700 dark:odd:bg-slate-800":e.options.variant==="default"&&e.options.striped,"border-primary-100 odd:bg-white even:bg-primary-50":e.options.variant==="primary"&&e.options.striped,"border-gray-100 odd:bg-white even:bg-gray-50":e.options.variant==="secondary"&&e.options.striped,"border-blue-100 odd:bg-white even:bg-blue-50":e.options.variant==="info"&&e.options.striped,"border-green-100 odd:bg-white even:bg-green-50":e.options.variant==="success"&&e.options.striped,"border-orange-100 odd:bg-white even:bg-orange-50":e.options.variant==="warning"&&e.options.striped,"border-red-100 odd:bg-white even:bg-red-50":e.options.variant==="danger"&&e.options.striped,"cursor-pointer hover:bg-gray-50":e.options.hover&&e.options.variant==="default","cursor-pointer hover:bg-primary-50":e.options.hover&&e.options.variant==="primary","cursor-pointer hover:bg-gray-50":e.options.hover&&e.options.variant==="secondary","cursor-pointer hover:bg-blue-50":e.options.hover&&e.options.variant==="info","cursor-pointer hover:bg-green-50":e.options.hover&&e.options.variant==="success","cursor-pointer hover:bg-orange-50":e.options.hover&&e.options.variant==="warning","cursor-pointer hover:bg-red-50":e.options.hover&&e.options.variant==="danger"}),key:f},[(l(!0),u(k,null,C(r(b),(w,I)=>(l(),u("td",{class:S(["p-4 pl-5 break-words",{"border-r last:border-l last:border-r-0":e.options.bordered&&!e.options.borderless,"border-gray-100":e.options.variant==="default","border-primary-100":e.options.variant==="primary","border-gray-100":e.options.variant==="secondary","border-blue-100":e.options.variant==="info","border-green-100":e.options.variant==="success","border-orange-100":e.options.variant==="warning","border-red-100":e.options.variant==="danger"}]),key:I},g(te(n,w)),3))),128))],2))),128))])],2))]),_:1})]),e.advanced?(l(),u("div",We,[s("div",Ke,[s("span",Re,"Showing "+g(r(p)*r(c)-r(p)+1)+" to "+g(r(p)*r(c))+" of "+g(r(ae))+" entries",1)]),s("div",Ie,[v(d,{variant:"primary-outline",class:"rounded-full !p-1 w-8 h-8 text-primary-800 bg-primary-800",onClick:se,disabled:r(c)==1},{default:y(()=>[v(o,{name:"ic:round-keyboard-double-arrow-left",size:"1rem"})]),_:1},8,["disabled"]),v(d,{variant:"primary-outline",class:"rounded-full !p-1 w-8 h-8 text-red-800 bg-primary-800",onClick:le,disabled:r(c)==1},{default:y(()=>[v(o,{name:"ic:round-keyboard-arrow-left",size:"1rem"})]),_:1},8,["disabled"]),(l(!0),u(k,null,C(r(oe),(n,f)=>(l(),B(d,{variant:r(c)==n?"primary":"primary-outline",class:"rounded-full !p-1 w-8 h-8 bg-primary-800 text-white",key:f,onClick:w=>ne(n)},{default:y(()=>[U(g(n),1)]),_:2},1032,["variant","onClick"]))),128)),v(d,{variant:"primary-outline",class:"rounded-full !p-1 w-8 h-8 bg-primary-800 text-white",onClick:ie,disabled:r(c)==r(K)},{default:y(()=>[v(o,{name:"ic:round-keyboard-arrow-right",size:"1rem"})]),_:1},8,["disabled"]),v(d,{variant:"primary-outline",class:"rounded-full !p-1 w-8 h-8 bg-primary-800 text-white",onClick:de,disabled:r(c)==r(K)},{default:y(()=>[v(o,{name:"ic:round-keyboard-double-arrow-right",size:"1rem"})]),_:1},8,["disabled"])])])):T("",!0)],2)}}};export{Qe as _};
